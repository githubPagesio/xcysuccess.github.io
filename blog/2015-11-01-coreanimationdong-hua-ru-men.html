
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>CoreAnimation动画入门 | 向晨宇的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="向晨宇">
    

    <meta name="keywords" content="debug,异常">
    <meta name="description" content="CoreAnimation,CAAnimation,CABasicAnimation,CAKeyframeAnimation, CATrasition,CAAnimaitionGroup, CAAnaimation">
<meta property="og:type" content="article">
<meta property="og:title" content="CoreAnimation动画入门">
<meta property="og:url" content="http://www.iosxxx.com/blog/2015-11-01-coreanimationdong-hua-ru-men.html">
<meta property="og:site_name" content="向晨宇的技术博客">
<meta property="og:description" content="CoreAnimation,CAAnimation,CABasicAnimation,CAKeyframeAnimation, CATrasition,CAAnimaitionGroup, CAAnaimation">
<meta property="og:image" content="http://www.iosxxx.com/images/animations/1.png">
<meta property="og:image" content="http://www.iosxxx.com/images/animations/3.png">
<meta property="og:image" content="http://www.iosxxx.com/images/animations/2.png">
<meta property="og:image" content="http://www.iosxxx.com/images/animations/4.png">
<meta property="og:updated_time" content="2016-06-02T14:20:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CoreAnimation动画入门">
<meta name="twitter:description" content="CoreAnimation,CAAnimation,CABasicAnimation,CAKeyframeAnimation, CATrasition,CAAnimaitionGroup, CAAnaimation">
<meta name="twitter:image" content="http://www.iosxxx.com/images/animations/1.png">

    
    <link rel="alternative" href="/atom.xml" title="向晨宇的技术博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.png">
    
    
    <link rel="apple-touch-icon" href="/img/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="/img/favicon.png">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="向晨宇的技术博客">向晨宇的技术博客</a></h1>
				<h2 class="blog-motto">做人做事,只有偏执到癫狂,才能达到顶峰</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives/">所有文章</a></li>
					
						<li><a href="/index/">索引</a></li>
					
						<li><a href="/about/">关于我</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:www.iosxxx.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/blog/2015-11-01-coreanimationdong-hua-ru-men.html" title="CoreAnimation动画入门" itemprop="url">CoreAnimation动画入门</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向晨宇" target="_blank" itemprop="author">向晨宇</a>
		
  <p class="article-time">
    <time datetime="2015-11-01T10:16:54.000Z" itemprop="datePublished"> 发表于 2015-11-01</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一-动画的基础分类"><span class="toc-number">1.</span> <span class="toc-text">一. 动画的基础分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二-CAAnimation——简介"><span class="toc-number">2.</span> <span class="toc-text">二. CAAnimation——简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-基本属性说明："><span class="toc-number">2.1.</span> <span class="toc-text">2.1 基本属性说明：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-fillMode解释说明"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 fillMode解释说明:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-CAMediaTimingFunction速度控制方法"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 CAMediaTimingFunction速度控制方法:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-代理方法"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 代理方法:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三-CABasicAnimation"><span class="toc-number">3.</span> <span class="toc-text">三. CABasicAnimation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-旋转动画"><span class="toc-number">3.1.</span> <span class="toc-text">3.2 旋转动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-缩放动画"><span class="toc-number">3.2.</span> <span class="toc-text">3.3 缩放动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-CABaseAnimation组合动画"><span class="toc-number">3.3.</span> <span class="toc-text">3.4 CABaseAnimation组合动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四-CAKeyframeAnimation"><span class="toc-number">4.</span> <span class="toc-text">四. CAKeyframeAnimation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念"><span class="toc-number">4.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#calculationMode计算模式"><span class="toc-number">4.2.</span> <span class="toc-text">calculationMode计算模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-使用贝赛尔曲线路径的关键帧动画"><span class="toc-number">4.3.</span> <span class="toc-text">4.1 使用贝赛尔曲线路径的关键帧动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-使用基于缩放的关键帧动画"><span class="toc-number">4.4.</span> <span class="toc-text">4.2 使用基于缩放的关键帧动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-使用基于路径的关键帧动画"><span class="toc-number">4.5.</span> <span class="toc-text">4.3 使用基于路径的关键帧动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-使用基于位置点的关键桢动画"><span class="toc-number">4.6.</span> <span class="toc-text">4.4 使用基于位置点的关键桢动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五-CAGroupAnimation"><span class="toc-number">5.</span> <span class="toc-text">五. CAGroupAnimation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念-1"><span class="toc-number">5.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-UIBezierPath、缩放、透明合并起来的Group动画"><span class="toc-number">5.2.</span> <span class="toc-text">5.1 UIBezierPath、缩放、透明合并起来的Group动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六-CATransition"><span class="toc-number">6.</span> <span class="toc-text">六. CATransition</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念-2"><span class="toc-number">6.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关键字属性"><span class="toc-number">6.2.</span> <span class="toc-text">关键字属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-改变导航栏文字"><span class="toc-number">6.3.</span> <span class="toc-text">6.1 改变导航栏文字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-切换视图"><span class="toc-number">6.4.</span> <span class="toc-text">6.2 切换视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八-UIView的属性"><span class="toc-number">7.</span> <span class="toc-text">八. UIView的属性:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-属性"><span class="toc-number">7.1.</span> <span class="toc-text">8.1 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-UIView动画的设置"><span class="toc-number">7.2.</span> <span class="toc-text">8.2 UIView动画的设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九-参考文献"><span class="toc-number">8.</span> <span class="toc-text">九. 参考文献</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#demo下载地址"><span class="toc-number">9.</span> <span class="toc-text">demo下载地址</span></a></li></ol>
		
		</div>
		
		<h2 id="一-动画的基础分类"><a href="#一-动画的基础分类" class="headerlink" title="一. 动画的基础分类"></a>一. 动画的基础分类</h2><p><img src="/images/animations/1.png" alt="1.png"><br>上述我们可以看到动画大体可以分为如下几类:  </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>CAAnaimation</td>
<td>抽象类，不具备动画效果，必须用它的子类才有动画效果</td>
<td></td>
</tr>
<tr>
<td>CAAnimaitionGroup</td>
<td>动画组，可以同时进行缩放，旋转</td>
<td></td>
</tr>
<tr>
<td>CAPropertyAnimation</td>
<td>抽象类，本身不具备动画效果，只有子类才有</td>
<td></td>
</tr>
<tr>
<td>CABasicAnimation</td>
<td>基本动画，做一些简单效果</td>
<td></td>
</tr>
<tr>
<td>CAKeyFrameAnimation</td>
<td>帧动画，做一些连续的流畅的动画</td>
<td></td>
</tr>
<tr>
<td>CATrasition</td>
<td>转场动画</td>
<td></td>
</tr>
</tbody>
</table>
<p>核心动画中所有类都遵守CAMediaTiming协议。</p>
<h2 id="二-CAAnimation——简介"><a href="#二-CAAnimation——简介" class="headerlink" title="二. CAAnimation——简介"></a>二. CAAnimation——简介</h2><h3 id="2-1-基本属性说明："><a href="#2-1-基本属性说明：" class="headerlink" title="2.1 基本属性说明："></a>2.1 基本属性说明：</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>duration</td>
<td>动画时长（秒为单位）（注：此处与原文有出入）</td>
<td></td>
</tr>
<tr>
<td>repeatCount</td>
<td>重复次数。永久重复的话设置为HUGE_VALF。</td>
<td></td>
</tr>
<tr>
<td>repeatDuration</td>
<td>重复时间</td>
<td></td>
</tr>
<tr>
<td>beginTime</td>
<td>指定动画开始时间。从开始指定延迟几秒执行的话，请设置为「CACurrentMediaTime() + 秒数」的形式。</td>
<td></td>
</tr>
<tr>
<td>timingFunction</td>
<td>设定动画的速度变化</td>
<td></td>
</tr>
<tr>
<td>autoreverses</td>
<td>动画结束时是否执行逆动画</td>
<td></td>
</tr>
<tr>
<td>removedOnCompletion</td>
<td>默认为YES，代表动画执行完毕后就从图层上移除，图形会恢复到动画执行前的状态。如果想让图层保持显示动画执行后的状态，那就设置为NO，不过还要设置fillMode为kCAFillModeForwards</td>
</tr>
<tr>
<td>fillMode</td>
<td>决定当前对象在非active时间段的行为。比如动画开始之前或者动画结束之</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-2-fillMode解释说明"><a href="#2-2-fillMode解释说明" class="headerlink" title="2.2 fillMode解释说明:"></a>2.2 <strong>fillMode</strong>解释说明:</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCAFillModeRemoved</td>
<td>这个是默认值，也就是说当动画开始前和动画结束后，动画对layer都没有影响，动画结束后，layer会恢复到之前的状态</td>
<td></td>
</tr>
<tr>
<td>kCAFillModeForwards</td>
<td>当动画结束后,layer会一直保持着动画最后的状态</td>
<td></td>
</tr>
<tr>
<td>kCAFillModeBackwards</td>
<td>这个和kCAFillModeForwards是相对的,就是在动画开始前,你只要将动画加入了一个layer,layer便立即进入动画的初始状态并等待动画开始.你可以这样设定测试代码,将一个动画加入一个layer的时候延迟5秒执行.然后就会发现在动画没有开始的时候,只要动画被加入了layer,layer便处于动画初始状态</td>
<td></td>
</tr>
<tr>
<td>kCAFillModeBoth</td>
<td>理解了上面两个,这个就很好理解了,这个其实就是上面两个的合成.动画加入后开始之前,layer便处于动画初始状态,动画结束后layer保持动画最后的状态.</td>
<td></td>
</tr>
</tbody>
</table>
<a id="more"></a>
<h3 id="2-3-CAMediaTimingFunction速度控制方法"><a href="#2-3-CAMediaTimingFunction速度控制方法" class="headerlink" title="2.3 CAMediaTimingFunction速度控制方法:"></a>2.3 <strong>CAMediaTimingFunction</strong>速度控制方法:</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCAMediaTimingFunctionLinear（线性）</td>
<td>匀速，给你一个相对静态的感觉</td>
<td></td>
</tr>
<tr>
<td>kCAMediaTimingFunctionEaseIn（渐进）</td>
<td>动画缓慢进入，然后加速离开</td>
<td></td>
</tr>
<tr>
<td>kCAMediaTimingFunctionEaseOut（渐出）</td>
<td>动画全速进入，然后减速的到达目的地</td>
<td></td>
</tr>
<tr>
<td>kCAMediaTimingFunctionEaseInEaseOut（渐进渐出）</td>
<td>动画缓慢的进入，中间加速，然后减速的到达目的地。这个是默认的动画行为。</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="/images/animations/3.png" alt="3.png">   </p>
<h3 id="2-4-代理方法"><a href="#2-4-代理方法" class="headerlink" title="2.4 代理方法:"></a>2.4 代理方法:</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动画开始时调用</span></span><br><span class="line">- (<span class="keyword">void</span>)animationDidStart:(<span class="built_in">CAAnimation</span> *)anim;</span><br><span class="line"><span class="comment">// 动画结束后调用</span></span><br><span class="line">- (<span class="keyword">void</span>)animationDidStop:(<span class="built_in">CAAnimation</span> *)anim finished:(<span class="built_in">BOOL</span>)flag;</span><br></pre></td></tr></table></figure>
<h2 id="三-CABasicAnimation"><a href="#三-CABasicAnimation" class="headerlink" title="三. CABasicAnimation"></a>三. CABasicAnimation</h2><p>###概念:<br>CABasicAnimation其实可以看作一种特殊的关键帧动画,只有头尾两个关键帧  </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>fromValue</td>
<td>开始值</td>
</tr>
<tr>
<td>toValue</td>
<td>终了值（絶対値）</td>
</tr>
<tr>
<td>byValue</td>
<td>keyPath属性的变化值（使用较少）</td>
</tr>
</tbody>
</table>
<p>###动画过程说明：<br>随着动画的进行，在长度为duration的持续时间内，keyPath相应属性的值从fromValue渐渐地变为toValue  </p>
<p>###可以改变的值:<br><img src="/images/animations/2.png" alt="2.png"><br><strong>animationWithKeyPath的值：</strong>  </p>
<p>transform.scale = 比例轉換<br>transform.scale.x = 闊的比例轉換<br>transform.scale.y = 高的比例轉換<br>transform.rotation.z = 平面圖的旋轉<br>opacity = 透明度<br>margin<br>zPosition<br>backgroundColor<br>cornerRadius<br>borderWidth<br>frame<br>bounds<br>contents<br>contentsRect<br>cornerRadius<br>hidden<br>mask<br>masksToBounds<br>position<br>shadowColor<br>shadowOffset<br>shadowOpacity<br>shadowRadius  </p>
<p>###3.1 移动动画</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CABasicAnimation</span> *animation = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@"position"</span>];</span><br><span class="line">    </span><br><span class="line"><span class="comment">//动画选项的设定</span></span><br><span class="line">animation.duration = <span class="number">2.5</span>;  <span class="comment">// 持续时间</span></span><br><span class="line">animation.repeatCount = <span class="number">1</span>; <span class="comment">// 重复次数</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//起始帧和终了帧的设定</span></span><br><span class="line">animation.fromValue = [<span class="built_in">NSValue</span> valueWithCGPoint:<span class="keyword">self</span>.viewRect.layer.position]; <span class="comment">// 起始帧</span></span><br><span class="line">animation.toValue = [<span class="built_in">NSValue</span> valueWithCGPoint:<span class="built_in">CGPointMake</span>(<span class="number">320</span>, <span class="number">480</span>)]; <span class="comment">// 终了帧</span></span><br><span class="line">animation.autoreverses = <span class="literal">YES</span>; <span class="comment">// 动画结束时执行逆动画</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 动画终了后不返回初始状态</span></span><br><span class="line"><span class="comment">// animation.removedOnCompletion = NO;</span></span><br><span class="line"><span class="comment">// animation.fillMode = kCAFillModeForwards;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 添加动画</span></span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:animation forKey:<span class="string">@"move-layer"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="3-2-旋转动画"><a href="#3-2-旋转动画" class="headerlink" title="3.2 旋转动画"></a>3.2 旋转动画</h3><p><img src="/images/animations/4.png" alt="4.png">   </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对Y轴进行旋转（指定Z轴的话，就和UIView的动画一样绕中心旋转）</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *animation = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@"transform.rotation.y"</span>];</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 设定动画选项</span></span><br><span class="line">animation.duration = <span class="number">2.5</span>; <span class="comment">// 持续时间</span></span><br><span class="line">animation.repeatCount = <span class="number">1</span>; <span class="comment">// 重复次数</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 设定旋转角度</span></span><br><span class="line">animation.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.0</span>]; <span class="comment">// 起始角度</span></span><br><span class="line">animation.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">2</span> * M_PI/<span class="number">3</span>]; <span class="comment">// 终止角度</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 动画终了后不返回初始状态</span></span><br><span class="line">animation.removedOnCompletion = <span class="literal">NO</span>;</span><br><span class="line">animation.fillMode = kCAFillModeForwards;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 添加动画</span></span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:animation forKey:<span class="string">@"rotate-layer"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="3-3-缩放动画"><a href="#3-3-缩放动画" class="headerlink" title="3.3 缩放动画"></a>3.3 缩放动画</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CABasicAnimation</span> *animation = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@"transform.scale"</span>];</span><br><span class="line"><span class="comment">// 动画选项设定</span></span><br><span class="line">animation.duration = <span class="number">2.5</span>; <span class="comment">// 动画持续时间</span></span><br><span class="line">animation.repeatCount = <span class="number">1</span>; <span class="comment">// 重复次数</span></span><br><span class="line">animation.autoreverses = <span class="literal">YES</span>; <span class="comment">// 动画结束时执行逆动画</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 缩放倍数</span></span><br><span class="line">animation.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">1.0</span>]; <span class="comment">// 开始时的倍率</span></span><br><span class="line">animation.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">2.0</span>];   <span class="comment">// 结束时的倍率</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 添加动画</span></span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:animation forKey:<span class="literal">NULL</span>];</span><br></pre></td></tr></table></figure>
<h3 id="3-4-CABaseAnimation组合动画"><a href="#3-4-CABaseAnimation组合动画" class="headerlink" title="3.4 CABaseAnimation组合动画"></a>3.4 CABaseAnimation组合动画</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/* 动画1（在X轴方向移动） */</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *animation1 =</span><br><span class="line">[<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@"transform.translation.x"</span>];</span><br><span class="line"><span class="comment">// 终点设定</span></span><br><span class="line">animation1.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">80</span>];; <span class="comment">// 終点</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/* 动画2（绕Z轴中心旋转） */</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *animation2 =</span><br><span class="line">[<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@"transform.rotation.z"</span>];</span><br><span class="line"><span class="comment">// 设定旋转角度</span></span><br><span class="line">animation2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.0</span>]; <span class="comment">// 开始时的角度</span></span><br><span class="line">animation2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">2</span> * M_PI]; <span class="comment">// 结束时的角度</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/* 动画组 */</span></span><br><span class="line"><span class="built_in">CAAnimationGroup</span> *group = [<span class="built_in">CAAnimationGroup</span> animation];</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 动画选项设定</span></span><br><span class="line">group.duration = <span class="number">3.0</span>;</span><br><span class="line">group.repeatCount = <span class="number">1</span>;</span><br><span class="line">group.autoreverses = <span class="literal">YES</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 添加动画</span></span><br><span class="line">group.animations = [<span class="built_in">NSArray</span> arrayWithObjects:animation1, animation2, <span class="literal">nil</span>];</span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:group forKey:<span class="string">@"move-rotate-layer"</span>];</span><br></pre></td></tr></table></figure>
<h2 id="四-CAKeyframeAnimation"><a href="#四-CAKeyframeAnimation" class="headerlink" title="四. CAKeyframeAnimation"></a>四. CAKeyframeAnimation</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>任何动画要表现出运动或者变化,至少需要两个不同的关键状态,而中间的状态的变化可以通过插值计算完成,从而形成补间动画,表示关键状态的帧叫做关键帧.   </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td>这是一个 CGPathRef  对象，默认是空的，当我们创建好CAKeyframeAnimation的实例的时候，可以通过制定一个自己定义的path来让  某一个物体按照这个路径进行动画。这个值默认是nil  当其被设定的时候  values  这个属性就被覆盖。</td>
<td></td>
</tr>
<tr>
<td>values</td>
<td>一个数组，提供了一组关键帧的值，  当使用path的 时候 values的值自动被忽略。</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="calculationMode计算模式"><a href="#calculationMode计算模式" class="headerlink" title="calculationMode计算模式"></a>calculationMode计算模式</h3><p>其主要针对的是每一帧的内容为一个座标点的情况,也就是对anchorPoint 和 position 进行的动画.当在平面座标系中有多个离散的点的时候,可以是离散的,也可以直线相连后进行插值计算,也可以使用圆滑的曲线将他们相连后进行插值计算. calculationMode目前提供如下几种模式  </p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCAAnimationLinear</td>
<td>calculationMode的默认值,表示当关键帧为座标点的时候,关键帧之间直接直线相连进行插值计算</td>
<td></td>
</tr>
<tr>
<td>kCAAnimationDiscrete</td>
<td>离散的,就是不进行插值计算,所有关键帧直接逐个进行显示;</td>
<td></td>
</tr>
<tr>
<td>kCAAnimationPaced</td>
<td>使得动画均匀进行,而不是按keyTimes设置的或者按关键帧平分时间,此时keyTimes和timingFunctions无效;</td>
<td></td>
</tr>
<tr>
<td>kCAAnimationCubic</td>
<td>对关键帧为座标点的关键帧进行圆滑曲线相连后插值计算,对于曲线的形状还可以通过tensionValues,continuityValues,biasValues来进行调整自定义,这里的数学原理是Kochanek–Bartels spline,这里的主要目的是使得运行的轨迹变得圆滑;</td>
<td></td>
</tr>
<tr>
<td>kCAAnimationCubicPaced</td>
<td>看这个名字就知道和kCAAnimationCubic有一定联系,其实就是在kCAAnimationCubic的基础上使得动画运行变得均匀,就是系统时间内运动的距离相同,此时keyTimes以及timingFunctions也是无效的.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="4-1-使用贝赛尔曲线路径的关键帧动画"><a href="#4-1-使用贝赛尔曲线路径的关键帧动画" class="headerlink" title="4.1 使用贝赛尔曲线路径的关键帧动画"></a>4.1 使用贝赛尔曲线路径的关键帧动画</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">UIBezierPath</span> *path = [<span class="built_in">UIBezierPath</span> bezierPath];</span><br><span class="line">[path moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">-40</span>, <span class="number">100</span>)];</span><br><span class="line">[path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">360</span>, <span class="number">100</span>)];</span><br><span class="line">[path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">360</span>, <span class="number">200</span>)];</span><br><span class="line">[path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">-40</span>, <span class="number">200</span>)];</span><br><span class="line">[path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">-40</span>, <span class="number">300</span>)];</span><br><span class="line">[path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">360</span>, <span class="number">300</span>)];</span><br><span class="line">    </span><br><span class="line"><span class="built_in">CAKeyframeAnimation</span> *moveAnimation = [<span class="built_in">CAKeyframeAnimation</span> animationWithKeyPath:<span class="string">@"position"</span>];</span><br><span class="line">moveAnimation.path = path.CGPath; <span class="comment">//是关键</span></span><br><span class="line">moveAnimation.duration = <span class="number">2.0</span>f;</span><br><span class="line">moveAnimation.rotationMode = kCAAnimationDiscrete;</span><br><span class="line"><span class="comment">//kCAAnimationPaced kCAAnimationCubic :使得keytimes无效</span></span><br><span class="line">[moveAnimation setKeyTimes:[<span class="built_in">NSArray</span> arrayWithObjects:[<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.0</span>],[<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.1</span>], [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.50</span>],[<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.65</span>], [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.7</span>],[<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">1.0</span>], <span class="literal">nil</span>]];</span><br><span class="line">    </span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:moveAnimation forKey:<span class="string">@"moveAnimation"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="4-2-使用基于缩放的关键帧动画"><a href="#4-2-使用基于缩放的关键帧动画" class="headerlink" title="4.2 使用基于缩放的关键帧动画"></a>4.2 使用基于缩放的关键帧动画</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">CAKeyframeAnimation</span> *bounce = [<span class="built_in">CAKeyframeAnimation</span> animationWithKeyPath:<span class="string">@"transform"</span>];</span><br><span class="line">    </span><br><span class="line"><span class="comment">///设置动画</span></span><br><span class="line"><span class="built_in">CATransform3D</span> forward = <span class="built_in">CATransform3DMakeScale</span>(<span class="number">1.3</span>, <span class="number">1.3</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> back = <span class="built_in">CATransform3DMakeScale</span>(<span class="number">0.7</span>, <span class="number">0.7</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> forward2 = <span class="built_in">CATransform3DMakeScale</span>(<span class="number">1.2</span>, <span class="number">1.2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> back2 = <span class="built_in">CATransform3DMakeScale</span>(<span class="number">0.9</span>, <span class="number">0.9</span>, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">[bounce setValues:[<span class="built_in">NSArray</span> arrayWithObjects:</span><br><span class="line">                  [<span class="built_in">NSValue</span> valueWithCATransform3D:<span class="built_in">CATransform3DIdentity</span>],</span><br><span class="line">                  [<span class="built_in">NSValue</span> valueWithCATransform3D:forward],</span><br><span class="line">                  [<span class="built_in">NSValue</span> valueWithCATransform3D:back],</span><br><span class="line">                  [<span class="built_in">NSValue</span> valueWithCATransform3D:forward2],</span><br><span class="line">                  [<span class="built_in">NSValue</span> valueWithCATransform3D:back2],</span><br><span class="line">                  [<span class="built_in">NSValue</span> valueWithCATransform3D:<span class="built_in">CATransform3DIdentity</span>],<span class="literal">nil</span>]];</span><br><span class="line">    </span><br><span class="line">[bounce setDuration:<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line"><span class="built_in">UILabel</span> *temp = (<span class="built_in">UILabel</span> *) [<span class="keyword">self</span>.view viewWithTag:<span class="number">100</span>];</span><br><span class="line">[temp.layer addAnimation:bounce forKey:<span class="literal">NULL</span>];</span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:bounce forKey:<span class="literal">NULL</span>];</span><br></pre></td></tr></table></figure>
<h3 id="4-3-使用基于路径的关键帧动画"><a href="#4-3-使用基于路径的关键帧动画" class="headerlink" title="4.3 使用基于路径的关键帧动画"></a>4.3 使用基于路径的关键帧动画</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CGMutablePathRef</span> path = <span class="built_in">CGPathCreateMutable</span>();</span><br><span class="line"> </span><br><span class="line"><span class="built_in">CGPathMoveToPoint</span>(path, <span class="literal">NULL</span>, <span class="number">50.0</span>, <span class="number">120.0</span>);</span><br><span class="line"><span class="built_in">CGPathAddCurveToPoint</span>(path, <span class="literal">NULL</span>, <span class="number">50.0</span>, <span class="number">275.0</span>, <span class="number">150.0</span>, <span class="number">275.0</span>, <span class="number">150.0</span>, <span class="number">120.0</span>);</span><br><span class="line"><span class="built_in">CGPathAddCurveToPoint</span>(path,<span class="literal">NULL</span>,<span class="number">150.0</span>,<span class="number">275.0</span>,<span class="number">250.0</span>,<span class="number">275.0</span>,<span class="number">250.0</span>,<span class="number">120.0</span>);</span><br><span class="line"><span class="built_in">CGPathAddCurveToPoint</span>(path,<span class="literal">NULL</span>,<span class="number">250.0</span>,<span class="number">275.0</span>,<span class="number">350.0</span>,<span class="number">275.0</span>,<span class="number">350.0</span>,<span class="number">120.0</span>);</span><br><span class="line"><span class="built_in">CGPathAddCurveToPoint</span>(path,<span class="literal">NULL</span>,<span class="number">350.0</span>,<span class="number">275.0</span>,<span class="number">450.0</span>,<span class="number">275.0</span>,<span class="number">450.0</span>,<span class="number">120.0</span>);</span><br><span class="line">    </span><br><span class="line"><span class="built_in">CAKeyframeAnimation</span> *anim = [<span class="built_in">CAKeyframeAnimation</span> animationWithKeyPath:<span class="string">@"position"</span>];</span><br><span class="line">[anim setPath:path];</span><br><span class="line">[anim setDuration:<span class="number">3.0</span>];</span><br><span class="line">[anim setAutoreverses:<span class="literal">YES</span>];</span><br><span class="line"><span class="built_in">CFRelease</span>(path);</span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:anim forKey:<span class="string">@"path"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="4-4-使用基于位置点的关键桢动画"><a href="#4-4-使用基于位置点的关键桢动画" class="headerlink" title="4.4 使用基于位置点的关键桢动画"></a>4.4 使用基于位置点的关键桢动画</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CAKeyframeAnimation</span> *keyAnim = [<span class="built_in">CAKeyframeAnimation</span> animationWithKeyPath:<span class="string">@"transform"</span>];</span><br><span class="line"><span class="built_in">CATransform3D</span> rotation1 = <span class="built_in">CATransform3DMakeRotation</span>(<span class="number">30</span> * M_PI/<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> rotation2 = <span class="built_in">CATransform3DMakeRotation</span>(<span class="number">60</span> * M_PI/<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> rotation3 = <span class="built_in">CATransform3DMakeRotation</span>(<span class="number">90</span> * M_PI/<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> rotation4 = <span class="built_in">CATransform3DMakeRotation</span>(<span class="number">120</span> * M_PI/<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> rotation5 = <span class="built_in">CATransform3DMakeRotation</span>(<span class="number">150</span> * M_PI/<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="built_in">CATransform3D</span> rotation6 = <span class="built_in">CATransform3DMakeRotation</span>(<span class="number">180</span> * M_PI/<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line">    </span><br><span class="line">[keyAnim setValues:[<span class="built_in">NSArray</span> arrayWithObjects:</span><br><span class="line">                   [<span class="built_in">NSValue</span> valueWithCATransform3D:rotation1],</span><br><span class="line">                   [<span class="built_in">NSValue</span> valueWithCATransform3D:rotation2],</span><br><span class="line">                   [<span class="built_in">NSValue</span> valueWithCATransform3D:rotation3],</span><br><span class="line">                   [<span class="built_in">NSValue</span> valueWithCATransform3D:rotation4],</span><br><span class="line">                   [<span class="built_in">NSValue</span> valueWithCATransform3D:rotation5],</span><br><span class="line">                   [<span class="built_in">NSValue</span> valueWithCATransform3D:rotation6],</span><br><span class="line">                   <span class="literal">nil</span>]];</span><br><span class="line">[keyAnim setKeyTimes:[<span class="built_in">NSArray</span> arrayWithObjects:</span><br><span class="line">                     [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.0</span>],</span><br><span class="line">                     [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.2</span>f],</span><br><span class="line">                     [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.4</span>f],</span><br><span class="line">                     [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.6</span>f],</span><br><span class="line">                     [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.8</span>f],</span><br><span class="line">                     [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">1.0</span>f],</span><br><span class="line">                     <span class="literal">nil</span>]];</span><br><span class="line">[keyAnim setDuration:<span class="number">4</span>];</span><br><span class="line">[keyAnim setFillMode:kCAFillModeForwards];</span><br><span class="line">[keyAnim setRemovedOnCompletion:<span class="literal">NO</span>];</span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:keyAnim forKey:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<h2 id="五-CAGroupAnimation"><a href="#五-CAGroupAnimation" class="headerlink" title="五. CAGroupAnimation"></a>五. CAGroupAnimation</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><p>将几种动画叠加起来同时播放,Group中设置的属性优先级高于内部每一个动画的属性，比如内部<code>posAnim.removedOnCompletion = YES;</code>,但是在group中设置了<code>animGroup.removedOnCompletion = NO;animGroup.fillMode = kCAFillModeForwards;</code>内部属性即为无效</p>
<h3 id="5-1-UIBezierPath、缩放、透明合并起来的Group动画"><a href="#5-1-UIBezierPath、缩放、透明合并起来的Group动画" class="headerlink" title="5.1 UIBezierPath、缩放、透明合并起来的Group动画"></a>5.1 UIBezierPath、缩放、透明合并起来的Group动画</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>) startAnimations</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">CAAnimationGroup</span> *group = [<span class="keyword">self</span> createGroupAnimation];</span><br><span class="line">    [<span class="keyword">self</span>.viewRect.layer addAnimation:group forKey:<span class="literal">NULL</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CAAnimationGroup</span> *)createGroupAnimation</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//贝塞尔曲线路径</span></span><br><span class="line">    <span class="built_in">UIBezierPath</span> *movePath = [<span class="built_in">UIBezierPath</span> bezierPath];</span><br><span class="line">    [movePath moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">10.0</span>, <span class="number">10.0</span>)];</span><br><span class="line">    [movePath addQuadCurveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">100</span>, <span class="number">300</span>) controlPoint:<span class="built_in">CGPointMake</span>(<span class="number">300</span>, <span class="number">100</span>)];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//路径动画</span></span><br><span class="line">    <span class="built_in">CAKeyframeAnimation</span> * posAnim = [<span class="built_in">CAKeyframeAnimation</span> animationWithKeyPath:<span class="string">@"position"</span>];</span><br><span class="line">    posAnim.path = movePath.CGPath;</span><br><span class="line">    posAnim.removedOnCompletion = <span class="literal">YES</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//缩放动画</span></span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *scaleAnim = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@"transform"</span>];</span><br><span class="line">    scaleAnim.fromValue = [<span class="built_in">NSValue</span> valueWithCATransform3D:<span class="built_in">CATransform3DIdentity</span>];</span><br><span class="line">    scaleAnim.toValue = [<span class="built_in">NSValue</span> valueWithCATransform3D:<span class="built_in">CATransform3DMakeScale</span>(<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">1.0</span>)];</span><br><span class="line">    scaleAnim.removedOnCompletion = <span class="literal">YES</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//透明动画</span></span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *opacityAnim = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@"opacity"</span>];</span><br><span class="line">    opacityAnim.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">1.0</span>];</span><br><span class="line">    opacityAnim.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.1</span>];</span><br><span class="line">    opacityAnim.removedOnCompletion = <span class="literal">NO</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//动画组</span></span><br><span class="line">    <span class="built_in">CAAnimationGroup</span> *animGroup = [<span class="built_in">CAAnimationGroup</span> animation];</span><br><span class="line">    animGroup.animations = [<span class="built_in">NSArray</span> arrayWithObjects:posAnim, scaleAnim, opacityAnim, <span class="literal">nil</span>];</span><br><span class="line">    animGroup.duration = <span class="number">1</span>;</span><br><span class="line">    animGroup.removedOnCompletion = <span class="literal">NO</span>;</span><br><span class="line">    animGroup.fillMode = kCAFillModeForwards;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> animGroup;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="六-CATransition"><a href="#六-CATransition" class="headerlink" title="六. CATransition"></a>六. CATransition</h2><h3 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h3><table>
<thead>
<tr>
<th>关键字</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td>startProgress</td>
<td>动画开始(在整体动画的百分比)  </td>
</tr>
<tr>
<td>endProgress</td>
<td>动画停止(在整体动画的百分比)</td>
</tr>
</tbody>
</table>
<h3 id="关键字属性"><a href="#关键字属性" class="headerlink" title="关键字属性"></a>关键字属性</h3><p><code>CATransition</code>关键字:<br>type  </p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCATransitionFade</td>
<td>淡出  </td>
</tr>
<tr>
<td>kCATransitionMoveIn</td>
<td>覆盖原图  </td>
</tr>
<tr>
<td>kCATransitionPush</td>
<td>推出  </td>
</tr>
<tr>
<td>kCATransitionReveal</td>
<td>底部显出来  </td>
</tr>
</tbody>
</table>
<p>subtype  </p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCATransitionFromRight</td>
<td>右</td>
<td></td>
</tr>
<tr>
<td>kCATransitionFromLeft</td>
<td>左</td>
<td></td>
</tr>
<tr>
<td>kCATransitionFromTop</td>
<td>上</td>
<td></td>
</tr>
<tr>
<td>kCATransitionFromBottom</td>
<td>下</td>
<td></td>
</tr>
</tbody>
</table>
<p>还有一种设置动画类型的方法，不用setSubtype，只用setType.<br>[animation setType:@”suckEffect”];这里的suckEffect就是效果名称，可以用的效果主要有：</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td>fade</td>
<td>交叉淡化过渡</td>
</tr>
<tr>
<td>push</td>
<td>新视图把旧视图推出去</td>
</tr>
<tr>
<td>moveIn</td>
<td>新视图移到旧视图上面</td>
</tr>
<tr>
<td>reveal</td>
<td>将旧视图移开,显示下面的新视图</td>
</tr>
<tr>
<td>cube</td>
<td>立方体翻滚效果</td>
</tr>
<tr>
<td>oglFlip</td>
<td>上下左右翻转效果</td>
</tr>
<tr>
<td>suckEffect</td>
<td>收缩效果，如一块布被抽走</td>
</tr>
<tr>
<td>rippleEffect</td>
<td>水滴效果</td>
</tr>
<tr>
<td>pageCurl</td>
<td>向上翻页效果</td>
</tr>
<tr>
<td>pageUnCurl</td>
<td>向下翻页效果</td>
</tr>
<tr>
<td>cameraIrisHollowOpen</td>
<td>相机镜头打开效果</td>
</tr>
<tr>
<td>cameraIrisHollowClos</td>
<td>相机镜头关闭效果  </td>
</tr>
</tbody>
</table>
<h3 id="6-1-改变导航栏文字"><a href="#6-1-改变导航栏文字" class="headerlink" title="6.1 改变导航栏文字"></a>6.1 改变导航栏文字</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CATransition</span> *animation = [<span class="built_in">CATransition</span> animation];</span><br><span class="line">animation.duration = <span class="number">0.5</span>;</span><br><span class="line">animation.type = kCATransitionFade;<span class="comment">//过渡效果</span></span><br><span class="line">animation.subtype = kCATransitionFromRight;<span class="comment">//过渡方向</span></span><br><span class="line">animation.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];<span class="comment">//样式</span></span><br><span class="line">[<span class="keyword">self</span>.navigationController.navigationBar.layer addAnimation: animation forKey: <span class="string">@"changeTextTransition"</span>];</span><br><span class="line"><span class="keyword">self</span>.navigationController.navigationBar.topItem.title = <span class="string">@"new标题"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-切换视图"><a href="#6-2-切换视图" class="headerlink" title="6.2 切换视图"></a>6.2 切换视图</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CATransition</span> * transition = [<span class="built_in">CATransition</span> animation];</span><br><span class="line">transition.duration = <span class="number">1.0</span>;<span class="comment">//动画间隔</span></span><br><span class="line">transition.type = kCATransitionReveal;<span class="comment">//oglFlip 主要种类，决定动画效果</span></span><br><span class="line">transition.startProgress = <span class="number">0.0</span>;<span class="comment">//开始</span></span><br><span class="line">transition.endProgress = <span class="number">1.0</span>;<span class="comment">//结束</span></span><br><span class="line">transition.subtype = kCATransitionFromRight;<span class="comment">//次要种类，决定动画方向</span></span><br><span class="line">transition.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];<span class="comment">//时间函数</span></span><br><span class="line">[<span class="keyword">self</span>.viewRect.layer addAnimation:transition forKey:<span class="string">@"ToNext"</span>];</span><br><span class="line"> </span><br><span class="line">srand((<span class="keyword">unsigned</span>)time(<span class="number">0</span>));</span><br><span class="line"><span class="keyword">int</span> i = rand() % <span class="number">5</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">self</span>.view.backgroundColor = _arrayColors[i];</span><br><span class="line">[[<span class="keyword">self</span>.view layer] addAnimation:transition forKey:<span class="string">@"animation"</span>];</span><br></pre></td></tr></table></figure>
<p>##七. CALayer上动画的暂停和恢复<br>暂停:  </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)pauseLayer:(<span class="built_in">CALayer</span>*)layer</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">CFTimeInterval</span> pausedTime = [layer convertTime:<span class="built_in">CACurrentMediaTime</span>() fromLayer:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 让CALayer的时间停止走动</span></span><br><span class="line">	layer.speed = <span class="number">0.0</span>;</span><br><span class="line">	<span class="comment">// 让CALayer的时间停留在pausedTime这个时刻</span></span><br><span class="line">	layer.timeOffset = pausedTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>恢复  </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)resumeLayer:(<span class="built_in">CALayer</span>*)layer</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">CFTimeInterval</span> pausedTime = layer.timeOffset;</span><br><span class="line">	<span class="comment">// 1. 让CALayer的时间继续行走</span></span><br><span class="line">	layer.speed = <span class="number">1.0</span>;</span><br><span class="line">	<span class="comment">// 2. 取消上次记录的停留时刻</span></span><br><span class="line">	layer.timeOffset = <span class="number">0.0</span>;</span><br><span class="line">	<span class="comment">// 3. 取消上次设置的时间</span></span><br><span class="line">	layer.beginTime = <span class="number">0.0</span>;    </span><br><span class="line">	<span class="comment">// 4. 计算暂停的时间(这里也可以用CACurrentMediaTime()-pausedTime)</span></span><br><span class="line">	<span class="built_in">CFTimeInterval</span> timeSincePause = [layer convertTime:<span class="built_in">CACurrentMediaTime</span>() fromLayer:<span class="literal">nil</span>] - pausedTime;</span><br><span class="line">	<span class="comment">// 5. 设置相对于父坐标系的开始时间(往后退timeSincePause)</span></span><br><span class="line">	layer.beginTime = timeSincePause;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="八-UIView的属性"><a href="#八-UIView的属性" class="headerlink" title="八. UIView的属性:"></a>八. UIView的属性:</h2><h3 id="8-1-属性"><a href="#8-1-属性" class="headerlink" title="8.1 属性"></a>8.1 属性</h3><table>
<thead>
<tr>
<th>关键字</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td>frame</td>
<td>视图框架</td>
<td></td>
</tr>
<tr>
<td>center</td>
<td>视图位置</td>
<td></td>
</tr>
<tr>
<td>bounds</td>
<td>视图⼤⼩</td>
<td></td>
</tr>
<tr>
<td>backgroundColor</td>
<td>背景颜⾊</td>
<td></td>
</tr>
<tr>
<td>alpha</td>
<td>视图透明度</td>
<td></td>
</tr>
<tr>
<td>transform</td>
<td>视图转换</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="8-2-UIView动画的设置"><a href="#8-2-UIView动画的设置" class="headerlink" title="8.2 UIView动画的设置"></a>8.2 UIView动画的设置</h3><table>
<thead>
<tr>
<th>⽅法名</th>
<th>作⽤</th>
</tr>
</thead>
<tbody>
<tr>
<td>+(void)setAnimationDuration:(NSTimeInterval)duration;</td>
<td>动画持续时间</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationDelay:(NSTimeInterval)delay;</td>
<td>动画开始前延时</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationCurve:(UIViewAnimationCurve)curve;</td>
<td>动画的速度曲线</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationRepeatAutoreverses:(BOOL)repeatAutoreverses;</td>
<td>动画反转</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationRepeatCount:(float)repeatCount;</td>
<td>动画反转的次数</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationDelegate:(id)delegate;</td>
<td>设置动画的代理</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationWillStartSelector:(SEL)selector;</td>
<td>动画开始的代理⽅法</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationDidStopSelector:(SEL)selector;</td>
<td>动画结束的代理⽅法</td>
<td></td>
</tr>
<tr>
<td>+(void)setAnimationBeginsFromCurrentState:(BOOL)fromCurrentState;</td>
<td>动画从当前状态继续执⾏</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="九-参考文献"><a href="#九-参考文献" class="headerlink" title="九. 参考文献"></a>九. 参考文献</h2><p>1.<a href="http://www.cnblogs.com/monicaios/p/3521575.html" target="_blank" rel="external">iOS基础 - 核心动画</a><br>2.<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514" target="_blank" rel="external">iOS官方文档guide</a><br>3.<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Animation_Types_Timing/Articles/PropertyAnimations.html" target="_blank" rel="external">iOS官方文档demo</a><br>4.<a href="https://developer.apple.com/search/?q=animationwithkeypath" target="_blank" rel="external">iOS官方搜索地址</a><br>5.<a href="http://blog.csdn.net/iosevanhuang/article/details/14488239" target="_blank" rel="external">CABasicAnimation的基本使用方法（移动·旋转·放大·缩小）</a><br>6.<a href="http://geeklu.com/2012/09/animation-in-ios/" target="_blank" rel="external">谈谈iOS Animation</a><br>7.<a href="http://blog.csdn.net/samuelltk/article/details/9048325" target="_blank" rel="external">CAKeyframeAnimation 关键帧动画的用法</a><br>8.<a href="http://www.jianshu.com/p/ee2d3a8b2d67" target="_blank" rel="external">CoreAnimation</a></p>
<h2 id="demo下载地址"><a href="#demo下载地址" class="headerlink" title="demo下载地址"></a>demo下载地址</h2><p><a href="https://github.com/xcysuccess/coreanimation" target="_blank" rel="external">CoreAnimationDemo-向晨宇撰写</a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://www.iosxxx.com/blog/2015-11-01-coreanimationdong-hua-ru-men.html" data-title="CoreAnimation动画入门 | 向晨宇的技术博客" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/blog/2015-12-24-brewan-zhuang-python.html" title="Mac下brew安装python3">
  <strong>上一篇：</strong><br/>
  <span>
  Mac下brew安装python3</span>
</a>
</div>


<div class="next">
<a href="/blog/2015-10-12-iosyi-bu-du-xie-zong-jie-zhi-nsdicionary.html"  title="iOS异步读写总结之NSDictionary">
 <strong>下一篇：</strong><br/> 
 <span>iOS异步读写总结之NSDictionary
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一-动画的基础分类"><span class="toc-number">1.</span> <span class="toc-text">一. 动画的基础分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二-CAAnimation——简介"><span class="toc-number">2.</span> <span class="toc-text">二. CAAnimation——简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-基本属性说明："><span class="toc-number">2.1.</span> <span class="toc-text">2.1 基本属性说明：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-fillMode解释说明"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 fillMode解释说明:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-CAMediaTimingFunction速度控制方法"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 CAMediaTimingFunction速度控制方法:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-代理方法"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 代理方法:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三-CABasicAnimation"><span class="toc-number">3.</span> <span class="toc-text">三. CABasicAnimation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-旋转动画"><span class="toc-number">3.1.</span> <span class="toc-text">3.2 旋转动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-缩放动画"><span class="toc-number">3.2.</span> <span class="toc-text">3.3 缩放动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-CABaseAnimation组合动画"><span class="toc-number">3.3.</span> <span class="toc-text">3.4 CABaseAnimation组合动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四-CAKeyframeAnimation"><span class="toc-number">4.</span> <span class="toc-text">四. CAKeyframeAnimation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念"><span class="toc-number">4.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#calculationMode计算模式"><span class="toc-number">4.2.</span> <span class="toc-text">calculationMode计算模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-使用贝赛尔曲线路径的关键帧动画"><span class="toc-number">4.3.</span> <span class="toc-text">4.1 使用贝赛尔曲线路径的关键帧动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-使用基于缩放的关键帧动画"><span class="toc-number">4.4.</span> <span class="toc-text">4.2 使用基于缩放的关键帧动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-使用基于路径的关键帧动画"><span class="toc-number">4.5.</span> <span class="toc-text">4.3 使用基于路径的关键帧动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-使用基于位置点的关键桢动画"><span class="toc-number">4.6.</span> <span class="toc-text">4.4 使用基于位置点的关键桢动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五-CAGroupAnimation"><span class="toc-number">5.</span> <span class="toc-text">五. CAGroupAnimation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念-1"><span class="toc-number">5.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-UIBezierPath、缩放、透明合并起来的Group动画"><span class="toc-number">5.2.</span> <span class="toc-text">5.1 UIBezierPath、缩放、透明合并起来的Group动画</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六-CATransition"><span class="toc-number">6.</span> <span class="toc-text">六. CATransition</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念-2"><span class="toc-number">6.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关键字属性"><span class="toc-number">6.2.</span> <span class="toc-text">关键字属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-改变导航栏文字"><span class="toc-number">6.3.</span> <span class="toc-text">6.1 改变导航栏文字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-切换视图"><span class="toc-number">6.4.</span> <span class="toc-text">6.2 切换视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八-UIView的属性"><span class="toc-number">7.</span> <span class="toc-text">八. UIView的属性:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-属性"><span class="toc-number">7.1.</span> <span class="toc-text">8.1 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-UIView动画的设置"><span class="toc-number">7.2.</span> <span class="toc-text">8.2 UIView动画的设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九-参考文献"><span class="toc-number">8.</span> <span class="toc-text">九. 参考文献</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#demo下载地址"><span class="toc-number">9.</span> <span class="toc-text">demo下载地址</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="xcysuccess" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>22</sup></a></li>
		  
		
		  
			<li><a href="/categories/other/" title="other">other<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://blog.sunnyxx.com/" target="_blank" title="sunnyxx">sunnyxx</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.devtang.com/" target="_blank" title="唐巧大神">唐巧大神</a>
            
          </li>
        
          <li>
            
            	<a href="http://beyondvincent.com/" target="_blank" title="破船之家">破船之家</a>
            
          </li>
        
          <li>
            
            	<a href="http://objccn.io/" target="_blank" title="objc中国">objc中国</a>
            
          </li>
        
          <li>
            
            	<a href="http://luodichen.com/blog/" target="_blank" title="luodichen">luodichen</a>
            
          </li>
        
          <li>
            
            	<a href="http://luoyibu.com/" target="_blank" title="luoyibu">luoyibu</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 古之成大事者，不惟有超世之才，亦必有坚韧不拔之志 <br/>
			</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/xcysuccess" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/xcysuccess" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:xcysuccess@qq.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="向晨宇">向晨宇</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'iosxxx';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
